/* empty css                                 */
import { e as createComponent, k as renderComponent, r as renderTemplate, h as addAttribute, o as Fragment, m as maybeRenderHead } from '../../astro/server._DgZez_d.mjs';
import 'piccolore';
import { $ as $$AdminLayout } from '../../AdminLayout.7POnspUO.mjs';
import { s as supabase } from '../../supabase.41eewI-c.mjs';
import { f as formatPrice } from '../../utils.Ceah_axf.mjs';
export { renderers } from '../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const prerender = false;
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const { data: products } = await supabase.from("products").select(`
    *,
    category:categories(name)
  `).order("created_at", { ascending: false });
  return renderTemplate`${renderComponent($$result, "AdminLayout", $$AdminLayout, { "title": "Productos" }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<div class="space-y-6"> <!-- Header --> <div class="flex items-center justify-between"> <div> <h1 class="text-2xl font-display">Productos</h1> <p class="text-primary-500">', ' productos</p> </div> <a href="/admin/productos/nuevo" class="flex items-center gap-2 bg-primary-900 text-white px-4 py-2 text-sm hover:bg-primary-800 transition-colors"> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path> </svg>\nNuevo producto\n</a> </div> <!-- Search & Filters --> <div class="bg-white border border-primary-200 p-4 flex flex-wrap gap-4"> <input type="text" placeholder="Buscar productos..." class="flex-1 min-w-[200px] border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <select class="border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <option>Todas las categor\xEDas</option> </select> <select class="border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <option>Todos los estados</option> <option>Activos</option> <option>Destacados</option> <option>Oferta</option> </select> </div> <!-- Products Table --> <div class="bg-white border border-primary-200 overflow-hidden"> <table class="w-full"> <thead class="bg-primary-50"> <tr> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Producto</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Categor\xEDa</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Precio</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Estado</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Acciones</th> </tr> </thead> <tbody class="divide-y divide-primary-100"> ', " </tbody> </table> </div> </div> <script>\n    async function deleteProduct(button) {\n      if (!confirm('\xBFEst\xE1s seguro de eliminar este producto?')) return;\n      \n      const productId = button.dataset.productId;\n      \n      try {\n        const response = await fetch(`/api/admin/products/${productId}`, {\n          method: 'DELETE',\n        });\n        \n        if (response.ok) {\n          window.location.reload();\n        } else {\n          alert('Error al eliminar el producto');\n        }\n      } catch (error) {\n        alert('Error al eliminar el producto');\n      }\n    }\n  <\/script> "], [" ", '<div class="space-y-6"> <!-- Header --> <div class="flex items-center justify-between"> <div> <h1 class="text-2xl font-display">Productos</h1> <p class="text-primary-500">', ' productos</p> </div> <a href="/admin/productos/nuevo" class="flex items-center gap-2 bg-primary-900 text-white px-4 py-2 text-sm hover:bg-primary-800 transition-colors"> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path> </svg>\nNuevo producto\n</a> </div> <!-- Search & Filters --> <div class="bg-white border border-primary-200 p-4 flex flex-wrap gap-4"> <input type="text" placeholder="Buscar productos..." class="flex-1 min-w-[200px] border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <select class="border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <option>Todas las categor\xEDas</option> </select> <select class="border border-primary-300 px-4 py-2 text-sm focus:outline-none focus:border-primary-900"> <option>Todos los estados</option> <option>Activos</option> <option>Destacados</option> <option>Oferta</option> </select> </div> <!-- Products Table --> <div class="bg-white border border-primary-200 overflow-hidden"> <table class="w-full"> <thead class="bg-primary-50"> <tr> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Producto</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Categor\xEDa</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Precio</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Estado</th> <th class="text-left text-xs uppercase tracking-wider text-primary-500 px-4 py-3">Acciones</th> </tr> </thead> <tbody class="divide-y divide-primary-100"> ', " </tbody> </table> </div> </div> <script>\n    async function deleteProduct(button) {\n      if (!confirm('\xBFEst\xE1s seguro de eliminar este producto?')) return;\n      \n      const productId = button.dataset.productId;\n      \n      try {\n        const response = await fetch(\\`/api/admin/products/\\${productId}\\`, {\n          method: 'DELETE',\n        });\n        \n        if (response.ok) {\n          window.location.reload();\n        } else {\n          alert('Error al eliminar el producto');\n        }\n      } catch (error) {\n        alert('Error al eliminar el producto');\n      }\n    }\n  <\/script> "])), maybeRenderHead(), products?.length || 0, products && products.length > 0 ? products.map((product) => renderTemplate`<tr class="hover:bg-primary-50 transition-colors"> <td class="px-4 py-3"> <div class="flex items-center gap-3"> <div class="w-12 h-12 bg-primary-100 flex-shrink-0 overflow-hidden"> ${product.images && product.images.length > 0 ? renderTemplate`<img${addAttribute(product.images[0], "src")}${addAttribute(product.name, "alt")} class="w-full h-full object-cover">` : renderTemplate`<div class="w-full h-full bg-primary-200"></div>`} </div> <div> <p class="font-medium">${product.name}</p> <p class="text-xs text-primary-500">SKU: ${product.sku || "N/A"}</p> </div> </div> </td> <td class="px-4 py-3 text-sm text-primary-600"> ${product.category?.name || "-"} </td> <td class="px-4 py-3"> <div> ${product.discount_percentage > 0 ? renderTemplate`${renderComponent($$result2, "Fragment", Fragment, {}, { "default": async ($$result3) => renderTemplate` <span class="text-red-600 font-medium"> ${formatPrice(product.price * (1 - product.discount_percentage / 100))} </span> <span class="text-xs text-primary-400 line-through ml-2"> ${formatPrice(product.price)} </span> ` })}` : renderTemplate`<span class="font-medium">${formatPrice(product.price)}</span>`} </div> </td> <td class="px-4 py-3"> <div class="flex gap-2"> ${product.is_featured && renderTemplate`<span class="text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded">Destacado</span>`} ${product.is_new && renderTemplate`<span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">Nuevo</span>`} ${product.discount_percentage > 0 && renderTemplate`<span class="text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded">-${product.discount_percentage}%</span>`} ${!product.is_active && renderTemplate`<span class="text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded">Inactivo</span>`} </div> </td> <td class="px-4 py-3"> <div class="flex items-center gap-2"> <a${addAttribute(`/admin/productos/${product.id}`, "href")} class="text-sm text-primary-600 hover:text-primary-900">
Editar
</a> <button class="text-sm text-red-600 hover:text-red-800"${addAttribute(product.id, "data-product-id")} onclick="deleteProduct(this)">
Eliminar
</button> </div> </td> </tr>`) : renderTemplate`<tr> <td colspan="5" class="px-4 py-8 text-center text-primary-500">
No hay productos. <a href="/admin/productos/nuevo" class="underline hover:text-primary-900">Crear el primero</a> </td> </tr>`) })}`;
}, "C:/Users/Felix/Desktop/CRM-Tienda Ropa/src/pages/admin/productos/index.astro", void 0);

const $$file = "C:/Users/Felix/Desktop/CRM-Tienda Ropa/src/pages/admin/productos/index.astro";
const $$url = "/admin/productos";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Index,
  file: $$file,
  prerender,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
