import{j as e}from"./jsx-runtime.D_zvdyIk.mjs";import{u as c}from"./index.BGqd_My2.mjs";import{r as x}from"./index.Da02gyCa.mjs";import{s as v,$ as y,d as b,e as g,g as N,u as w,r as k}from"./cart.DEWmPhv4.mjs";import{f as t}from"./utils.ryeeuhiT.mjs";function T(){const d=c(y),n=c(b),i=c(g),[o,p]=x.useState(0);x.useEffect(()=>{if(!i)return;v();const r=()=>{const l=N();p(l)};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[i,d]);const h=r=>{const s=Math.floor(r/60),l=r%60;return`${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},m=async(r,s)=>{await w(r,s)},u=async r=>{await k(r)},j=()=>{window.location.href="/carrito"};if(!i)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-64px)] p-6",children:[e.jsx("svg",{className:"w-16 h-16 text-primary-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-primary-500 text-sm mb-4",children:"Tu cesta está vacía"}),e.jsx("button",{onClick:()=>window.closeCart?.(),className:"text-sm underline hover:no-underline",children:"Continuar comprando"})]});const a=n>=100?0:5.95,f=n+a;return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)]",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:d.map(r=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("a",{href:`/productos/${r.slug}`,className:"flex-shrink-0 w-20 aspect-[3/4] bg-primary-100",children:e.jsx("img",{src:r.image||"https://via.placeholder.com/100x100?text=Imagen",alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("a",{href:`/productos/${r.slug}`,className:"text-sm font-medium text-primary-900 hover:underline line-clamp-1",children:r.name}),e.jsxs("p",{className:"text-xs text-primary-500 mt-1",children:[r.size," | ",r.color]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>m(r.variantId,r.quantity-1),className:"w-7 h-7 border border-primary-300 flex items-center justify-center hover:border-primary-900 transition-colors","aria-label":"Reducir cantidad",children:"-"}),e.jsx("span",{className:"w-8 text-center text-sm",children:r.quantity}),e.jsx("button",{onClick:()=>m(r.variantId,r.quantity+1),disabled:r.quantity>=r.maxStock,className:"w-7 h-7 border border-primary-300 flex items-center justify-center hover:border-primary-900 transition-colors disabled:opacity-50","aria-label":"Aumentar cantidad",children:"+"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t(r.price*r.quantity)}),r.originalPrice>r.price&&e.jsx("span",{className:"text-xs text-primary-400 line-through",children:t(r.originalPrice*r.quantity)})]})]}),e.jsx("button",{onClick:()=>u(r.variantId),className:"p-1 text-primary-400 hover:text-primary-900 transition-colors","aria-label":"Eliminar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 18L18 6M6 6l12 12"})})})]},r.id))}),e.jsxs("div",{className:"border-t border-primary-200 p-6 space-y-4",children:[o>0&&e.jsxs("div",{className:`flex items-center justify-center gap-2 py-2 px-3 rounded text-sm ${o<300?"bg-red-50 text-red-700":"bg-amber-50 text-amber-700"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["Reservado por: ",e.jsx("strong",{children:h(o)})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-primary-500",children:"Subtotal"}),e.jsx("span",{children:t(n)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-primary-500",children:"Envío"}),e.jsx("span",{children:a===0?"Gratis":t(a)})]}),a>0&&e.jsx("p",{className:"text-xs text-primary-400",children:"Envío gratis en pedidos superiores a 100€"}),e.jsxs("div",{className:"flex justify-between text-base font-medium pt-2 border-t border-primary-200",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:t(f)})]}),e.jsx("button",{onClick:j,className:"w-full bg-primary-900 text-white text-sm tracking-widest uppercase py-4 hover:bg-primary-800 transition-colors",children:"Tramitar pedido"}),e.jsx("button",{onClick:()=>window.closeCart?.(),className:"w-full text-sm text-primary-500 hover:text-primary-900 transition-colors",children:"Continuar comprando"})]})]})}export{T as default};
