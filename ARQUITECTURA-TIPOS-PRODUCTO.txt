â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                            â•‘
â•‘    ğŸ¯ SISTEMA DE TIPOS DE PRODUCTO - ARQUITECTURA Y FLUJO                 â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                           FLUJO DE DATOS                                 â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

ADMIN - CREAR PRODUCTO
â”‚
â”œâ”€ 1. Admin abre /admin/productos/nuevo
â”‚     â””â”€ PÃ¡gina: create-edit.astro
â”‚        
â”œâ”€ 2. Admin llena formulario
â”‚     â”œâ”€ Nombre: "Camiseta Basic"
â”‚     â”œâ”€ Tipo: â¬‡ï¸ [Camisetaâ–¼] â† SELECT de product_types
â”‚     â”œâ”€ Precio: â‚¬25
â”‚     â””â”€ Guardar
â”‚
â”œâ”€ 3. EnvÃ­a a POST /api/admin/products/save
â”‚     â”œâ”€ ValidaciÃ³n de datos
â”‚     â”œâ”€ Generar slug
â”‚     â””â”€ INSERT en products (con product_type_id)
â”‚        â””â”€ Retorna: productId
â”‚
â”œâ”€ 4. Admin redirigido a /admin/productos/[productId]
â”‚     â””â”€ PÃ¡gina: create-edit.astro (edit mode)
â”‚
â”œâ”€ 5. Admin crea variantes
â”‚     â”œâ”€ Color: "Rojo"
â”‚     â”œâ”€ Talla: â¬‡ï¸ [Sâ–¼] â† GET /api/admin/product-types/sizes?type_id=xyz
â”‚     â”‚          Devuelve: ['S', 'M', 'L', 'XL', 'XXL']
â”‚     â”œâ”€ Stock: 25
â”‚     â””â”€ Guardar
â”‚
â”œâ”€ 6. Sube imÃ¡genes de variante
â”‚     â””â”€ VariantImagesUploader.tsx
â”‚        â”œâ”€ Drag-drop: ğŸ“· ğŸ“· ğŸ“·
â”‚        â”œâ”€ Reordena con drag
â”‚        â”œâ”€ Marca una como principal (â­)
â”‚        â””â”€ Cada una:
â”‚            â”œâ”€ Sube a storage/product-images/{productId}/{variantId}/...
â”‚            â””â”€ INSERT en variant_images
â”‚               â”œâ”€ image_url
â”‚               â”œâ”€ alt_text
â”‚               â”œâ”€ is_primary
â”‚               â””â”€ sort_order


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         ESTRUCTURA DE DATOS                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

product_types
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id          â”‚ slug      â”‚ available_sizes         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pt-001      â”‚ camiseta  â”‚ ['S','M','L','XL','XXL']
â”‚ pt-002      â”‚ zapato    â”‚ ['35','36',...,'46']
â”‚ pt-003      â”‚ bolso     â”‚ ['Ãšnico']
â”‚ ...         â”‚ ...       â”‚ ...
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


products
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id      â”‚ name          â”‚ product_type_id  â”‚ price      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ p-001   â”‚ Camiseta      â”‚ pt-001 â”â”â”â”â”â”â”â”â”â”â”â†’ Camiseta
â”‚         â”‚ Basic         â”‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ p-002   â”‚ Zapatilla     â”‚ pt-002 â”â”â”â”â”â”â”â”â”â”â”â†’ Zapato
â”‚         â”‚ Nike          â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


product_variants
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id    â”‚ product_id â”‚ color â”‚ size â”‚ stock       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ v-001 â”‚ p-001      â”‚ Rojo  â”‚ M    â”‚ 25
â”‚ v-002 â”‚ p-001      â”‚ Azul  â”‚ M    â”‚ 15
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚       â”‚
  â”‚       â””â”€ (FK) products.id
  â”‚
  â””â”€ PK relacionado con variant_images


variant_images
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id    â”‚ variant_id â”‚ image_url      â”‚ is_primary â”‚ sort_orderâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ img-1 â”‚ v-001      â”‚ s3://...1.jpg  â”‚ true   â­  â”‚ 0
â”‚ img-2 â”‚ v-001      â”‚ s3://...2.jpg  â”‚ false      â”‚ 1
â”‚ img-3 â”‚ v-001      â”‚ s3://...3.jpg  â”‚ false      â”‚ 2
â”‚ img-4 â”‚ v-002      â”‚ s3://...4.jpg  â”‚ true   â­  â”‚ 0
â”‚ img-5 â”‚ v-002      â”‚ s3://...5.jpg  â”‚ false      â”‚ 1
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         COMPONENTES Y APIS                               â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€ Frontend (Astro) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”‚  ğŸ“„ create-edit.astro                     â”‚
â”‚  â”œâ”€ Formulario producto                  â”‚
â”‚  â”œâ”€ Select type dropdown                 â”‚
â”‚  â”œâ”€ Listado variantes                    â”‚
â”‚  â””â”€ â–¶ VariantImagesUploader.tsx          â”‚
â”‚                                            â”‚
â”‚  âš›ï¸ VariantImagesUploader.tsx             â”‚
â”‚  â”œâ”€ Drag-drop upload                     â”‚
â”‚  â”œâ”€ Reorder images                       â”‚
â”‚  â”œâ”€ Set as primary                       â”‚
â”‚  â””â”€ Delete image                         â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚
           â”‚ POST               â”‚ POST
           â–¼ /api/admin/...     â–¼ /api/admin/...
           
â”Œâ”€ APIs (TypeScript) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                               â”‚
â”‚  ğŸ“ /api/admin/products/save                 â”‚
â”‚     POST â†’ INSERT/UPDATE products            â”‚
â”‚                                               â”‚
â”‚  ğŸ“ /api/admin/products/variants             â”‚
â”‚     POST â†’ UPSERT product_variants           â”‚
â”‚     DELETE â†’ DELETE product_variants         â”‚
â”‚                                               â”‚
â”‚  ğŸ“ /api/admin/product-types/sizes           â”‚
â”‚     GET â†’ SELECT available_sizes             â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Supabase SDK
           â–¼
           
â”Œâ”€ Base de Datos â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ˜ PostgreSQL (Supabase)                 â”‚
â”‚                                           â”‚
â”‚  ğŸ“‹ product_types (9 tipos)              â”‚
â”‚  ğŸ“‹ products (con product_type_id)       â”‚
â”‚  ğŸ“‹ product_variants                     â”‚
â”‚  ğŸ“‹ variant_images â† NUEVO               â”‚
â”‚                                           â”‚
â”‚  âš™ï¸ Funciones SQL:                        â”‚
â”‚     â€¢ get_sizes_by_product_type()        â”‚
â”‚     â€¢ get_variant_images()               â”‚
â”‚     â€¢ set_primary_variant_image()        â”‚
â”‚                                           â”‚
â”‚  ğŸ”’ RLS Policies (seguridad)             â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Storage API
           â–¼
           
â”Œâ”€ Storage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª£ Supabase Storage                      â”‚
â”‚                                           â”‚
â”‚  ğŸ“ product-images/                      â”‚
â”‚     â”œâ”€ {productId}/                      â”‚
â”‚     â”‚  â”œâ”€ {variantId}/                   â”‚
â”‚     â”‚  â”‚  â”œâ”€ 12345-image1.jpg            â”‚
â”‚     â”‚  â”‚  â”œâ”€ 12346-image2.jpg            â”‚
â”‚     â”‚  â”‚  â””â”€ 12347-image3.jpg            â”‚
â”‚     â”‚  â””â”€ ...                            â”‚
â”‚     â””â”€ ...                               â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         FLUJO DE SELECCIÃ“N                               â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

USUARIO EN FRONTEND: Compra producto

/productos/camiseta-basic
â”‚
â”œâ”€ 1. Carga pÃ¡gina
â”‚     â”œâ”€ GET product by slug
â”‚     â”œâ”€ GET product_variants
â”‚     â””â”€ GET product_types (talla y talla disponibles)
â”‚
â”œâ”€ 2. Usuario selecciona color
â”‚     â””â”€ Camiseta ğŸ”´ Roja
â”‚
â”œâ”€ 3. Usuario selecciona talla
â”‚     â””â”€ Talla â¬‡ï¸ [Mâ–¼] â† Viene de product_type.available_sizes
â”‚        Opciones: S, M, L, XL, XXL
â”‚
â”œâ”€ 4. Carga imÃ¡genes de la variante (Roja - M)
â”‚     â””â”€ GET /api/products/{productId}/variants/{variantId}/images
â”‚        â””â”€ SELECT * FROM variant_images WHERE variant_id = v-001
â”‚           â”œâ”€ ğŸ“· Frontal (is_primary: true) â† PRIMERA
â”‚           â”œâ”€ ğŸ“· Back
â”‚           â””â”€ ğŸ“· Detail
â”‚
â”œâ”€ 5. Muestra galerÃ­a
â”‚     â”œâ”€ Main image (la principal â­)
â”‚     â””â”€ Thumbnails (las demÃ¡s en orden sort_order)
â”‚
â””â”€ 6. Usuario compra
     â””â”€ Carrito â†’ Checkout â†’ Pago


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         DIFERENCIA ANTES/DESPUÃ‰S                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

ANTES:
â”€â”€â”€â”€â”€â”€

product_variants
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ color  â”‚ size â”‚ color_image (1 foto)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Rojo   â”‚ M    â”‚ s3://rojo-generic.jpg    â”‚
â”‚ Azul   â”‚ M    â”‚ s3://azul-generic.jpg    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problema:
  âŒ Una sola foto por variante
  âŒ No se ve frontal, back, detalle
  âŒ Todas las tallas son free text


DESPUÃ‰S:
â”€â”€â”€â”€â”€â”€â”€â”€

product_variants (igual estructura)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ color  â”‚ size  â”‚ (sin color_image) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Rojo   â”‚ M     â”‚ (ver variant_img) â”‚
â”‚ Azul   â”‚ M     â”‚ (ver variant_img) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€ product_type_id (Camiseta)
                      â”œâ”€ available_sizes = ['S','M','L','XL','XXL']

variant_images (NUEVO)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ variant_id â”‚ image_url        â”‚ primary   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ v-001      â”‚ s3://frontal.jpg â”‚ true  â­  â”‚
â”‚ v-001      â”‚ s3://back.jpg    â”‚ false     â”‚
â”‚ v-001      â”‚ s3://detail.jpg  â”‚ false     â”‚
â”‚ v-002      â”‚ s3://azul-1.jpg  â”‚ true  â­  â”‚
â”‚ v-002      â”‚ s3://azul-2.jpg  â”‚ false     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ventajas:
  âœ… MÃºltiples fotos por variante
  âœ… GalerÃ­a profesional
  âœ… Tallas predefinidas por tipo
  âœ… FÃ¡cil reorder
  âœ… Imagen principal destacada


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         ARCHIVOS INVOLUCRADOS                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Backend:
  âœ… supabase/product-types-migration.sql
  âœ… src/pages/api/admin/products/save.ts
  âœ… src/pages/api/admin/products/variants.ts
  âœ… src/pages/api/admin/product-types/sizes.ts

Frontend Admin:
  âœ… src/pages/admin/productos/create-edit.astro
  âœ… src/components/islands/VariantImagesUploader.tsx

Frontend Public:
  â³ src/pages/productos/[slug].astro (modificar)
  â³ src/components/product/ProductGallery.astro (modificar)

DocumentaciÃ³n:
  âœ… GUIA-TIPOS-PRODUCTO.md
  âœ… CHECKLIST-TIPOS-PRODUCTO.md
  âœ… INICIO-RAPIDO-TIPOS-PRODUCTO.md
  âœ… ESTADO-PROYECTO-FINAL.md


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                      LÃNEA DE TIEMPO DE IMPLEMENTACIÃ“N                   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€ Hora 0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Archivos creados âœ…                 â”‚
â”‚  SQL lista âœ…                        â”‚
â”‚  APIs lista âœ…                       â”‚
â”‚  React component lista âœ…            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 5 min (Ejecutar SQL)
           â–¼
â”Œâ”€ Hora 0:05 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  product_types table existe          â”‚
â”‚  variant_images table existe         â”‚
â”‚  9 tipos predefinidos insertados     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 10 min (Asignar tipos)
           â–¼
â”Œâ”€ Hora 0:15 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Todos los productos tienen tipo     â”‚
â”‚  ready para nuevo flujo              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 20 min (Update Admin)
           â–¼
â”Œâ”€ Hora 0:35 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin form mejorado                 â”‚
â”‚  VariantImagesUploader integrado     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 15 min (Testing)
           â–¼
â”Œâ”€ Hora 0:50 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Crear producto new âœ“                â”‚
â”‚  Subir mÃºltiples imÃ¡genes âœ“          â”‚
â”‚  Reordear imÃ¡genes âœ“                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 15 min (Frontend)
           â–¼
â”Œâ”€ Hora 1:05 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PÃ¡gina pÃºblica muestra galerÃ­a âœ“    â”‚
â”‚  Todas las imÃ¡genes en orden âœ“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚
           â–¼
   âœ¨ TODO LISTO âœ¨


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                            â•‘
â•‘              ğŸ‰ Sistema completamente implementado ğŸ‰                      â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

