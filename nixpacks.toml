# Nixpacks configuration for Coolify deployment
# Optimized for Astro 5.0 with Node.js

[variables]
NIXPACKS_NODE_VERSION = "20"
NODE_ENV = "production"

[phases.setup]
dependsOn = []

[phases.build]
dependsOn = ["setup"]
commands = [
  "npm ci",
  "npm run build"
]

[phases.start]
dependsOn = []
cmd = "node ./dist/server/entry.mjs"
